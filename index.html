<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<link rel="stylesheet" href="styles.css" />
		<title>Insta Chat</title>
		<script
			crossorigin
			src="https://unpkg.com/react@16/umd/react.development.js"
		></script>
		<script
			crossorigin
			src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"
		></script>
		<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
		<script src="utils.js"></script>
	</head>
	<body>
		<div id="root">React is not loaded</div>
		<script type="text/babel">
			let messages
			for (const chat of chats) {
				if (chat.participants.includes('__deleted__bhiebeafeacedigbh')) {
					messages = chat.conversation.sort(
						(a, b) => new Date(a.created_at) - new Date(b.created_at)
					)
				}
			}

			const App = () => (
				<div className="container">
					<h1 className="heading">Chat between two persons</h1>
					{messages
						// .slice(1, 10)
						.map(message =>
							message.sender === 'just_not_here' ? (
								<div className="chatsOnRight">
									{message.text || 'Invalid text'}
								</div>
							) : (
								<div className="chatsOnLeft">{message.text}</div>
							)
						)}
					<input
						className="sendMessageInput"
						placeholder="Enter your message here..."
						type="text"
					/>
				</div>
			)

			ReactDOM.render(<App />, document.getElementById('root'))
		</script>
	</body>
</html>
